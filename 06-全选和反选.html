<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        .wrap {
            width: 800px;
            height: 400px;
            margin: 0 auto;
        }

        table {
            margin: 20px auto;
        }
    </style>
</head>

<body>
    <div class="wrap">
        <table cellspacing="20">
            <tr>
                <th><input type="checkbox" value="全选" id="all"></th>
                <th>产品</th>
                <th>价钱</th>

            </tr>
            <tr>
                <td><input type="checkbox" class="check"></td>
                <td>iphone</td>
                <td>5000</td>

            </tr>
            <tr>
                <td><input type="checkbox" class="check"></td>
                <td>iwatch</td>
                <td>2000</td>

            </tr>
            <tr>
                <td><input type="checkbox" class="check"></td>
                <td>ipad</td>
                <td>3000</td>

            </tr>
        </table>
        <input type="button" class="inverse" value="反选">
    </div>

    <script>

        var btnAll = document.querySelector('#all');
        // 全选框
        var checks = document.querySelectorAll('.check');
        // 其它的选择框
        var btnInv = document.querySelector('.inverse');
        // 反选框




        // 全选功能
        btnAll.onclick = function () {
            // 让所有的 多选框 和 自己的 状态 一致
            // console.log(this.checked);
            for (var i = 0; i < checks.length; i++) {
                checks[i].checked = this.checked;
            }
        }

        // 反选功能
        btnInv.onclick = function () {
            // 让每一个  多选框  变的 和原来的状态相反
            for (var i = 0; i < checks.length; i++) {

                checks[i].checked = !checks[i].checked;
                
                // if(checks[i].checked){
                //     checks[i].checked = false
                // }else{
                //     checks[i].checked = true
                // }
            }
            
            checkAll();
            // 这个是调用一下 全选框的逻辑,因为全选框 是在反选这里也成立的.  
        }


        for (var i = 0; i < checks.length; i++) {
            checks[i].onclick = function(){
                checkAll();
        // 为什么要用for循环,就是要套取 所有复选框的状态 . 
        // 本段思路是,遍历所有的复选框,当复选框点击时,去用checkall 的函数判断,是否所有的复选框都被点击, 只要点击一次复选框,就需要判断一次checkAll()是否成立 .

                // 这个是定义全选和多选框的逻辑,为什么不写在一起呢,是因为反选功能也要用到这个逻辑, 让他定义在全局里, 作用域 在全局,整个页面都可以用到了 这个逻辑
            }
        }

        //每点击 一个 多选框,都要做以下的 逻辑
        // 全选按钮的状态变换 (所有复选框都选中时,全选按钮也要被选中)

        // 这个是定义cheks都选了,checkAll 也就选上了  .
        // 如果有一个是错误的,则 checkAll 也就是错误的.
        function checkAll() {
            for (var i = 0; i < checks.length; i++) {
                var flag = true;
                // if (checks[i].checked === false) {
                //     flag = false;
                //     break;
                // }
                // checked 是false 时  走一下代码
                if(!checks[i].checked){
                    flag = false;
                    break;
                }
            }

            btnAll.checked = flag;

            // if (flag === true) {
            //     btnAll.checked = true;
            // }else{
            //     btnAll.checked = false;
            // }
        }


    </script>
</body>

</html>